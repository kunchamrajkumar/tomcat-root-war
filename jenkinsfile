node {
	
def server = Artifactory.server "jfrog"
def rtMaven = Artifactory.newMavenBuild()
def buildInfo



stage('Clone sources') {
	
git branch: 'master', credentialsId: 'git_creds', url: 'https://github.com/kunchamrajkumar/tomcat-root-war.git'
   }

stage('Artifactory configuration') {
	
          rtMaven.tool = "maven"
          rtMaven.deployer releaseRepo:'libs-release-local', snapshotRepo:'libs-snapshot-local', server: server
          rtMaven.resolver releaseRepo:'libs-release-local', snapshotRepo:'libs-snapshot-local', server: server
  }

stage('Maven Build') {
	
        buildInfo = rtMaven.run pom: 'pom.xml', goals: 'clean install -U'
  }

stage('Publish build info') {
	
       server.publishBuildInfo buildInfo
}
}
